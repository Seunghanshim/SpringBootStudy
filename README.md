# Hello Shop

## 요구사항 분석과 기능 목록
  - 회원 기능
    - 회원 등록
    - 회원 조회
  - 상품 기능
    - 상품 등록
    - 상품 수정
    - 상품 조회
  - 주문 기능
    - 상품 주문
    - 주문 내역 조회
    - 주문 취소
  - 기타 요구사항
    - 상품은 제고 관리가 필요하다.
    - 상품의 종류는 도서, 음반, 영화가 있다.
    - 상품을 카테고리로 구분할 수 있다.
    
## 도메인 모델과 테이블 설계
  ![도메인](https://user-images.githubusercontent.com/68942616/90248517-cf5ff880-de73-11ea-82db-560f919497fa.PNG)
  <br>
  - **회원, 주문, 상품의 관계:** 회원은 여러 상품을 주문할 수 있다. 
  그리고 한 번 주문할 때, 여러 상품을 선택할 수 있으므로 주문과 상품은 N:M 관계이다.
  하지만 이런 N:M 관계는 관계형 데이터 베이스는 물론이고 엔티티에서도 거의 사용하지 않는다.
  따라서 그림처럼 주문상품이라는 엔티티를 추가해서 N:M 관계를 1:N, N:1 관계로 풀어냈다.
  - **상품 분류:** 상품은 도서, 음반, 영화로 구분되는데, 상품이라는 공통 속성을 사용하므로 상속 구조로 표현했다.
  
## 엔티티 분석
  ![엔티티](https://user-images.githubusercontent.com/68942616/90248519-cff88f00-de73-11ea-845c-b0beeb12e460.PNG)
  - **회원(Member):** 이름과 임베디드 타입인 주소(Address), 그리고 주문(orders) 리스트를 가진다.
  - **주문(Order):** 한번 주문시 여러 상품을 주문할 수 있으므로 주문과 주문상품(OrderItem)은 일대다 관계이다.
  주문은 상품을 주문한 회원과 배송 정보, 주문 날짜, 주문 상태(status)를 가지고 있다.
  주문 상태는 열거형을 사용했는데 주문(ORDER), 취소(CANCEL)을 표현할 수 있다.
  - **주문상품(OrderItem):** 주문한 상품 정보와 주문 금액(orderPrice), 주문 수량(count) 정보를 가지고 있다.
  - **상품(item):** 이름, 가격, 재고수량(stockQuantity)을 가지고 있따. 상품을 주문하면 재고수량이 줄어든다.
  상품의 종류로는 도서, 음반, 영화가 있는데 각각은 사용하는 속성이 조금씩 다르다.
  - **배송(Delivery):** 주문시 하나의 배송 정보를 생성한다. 주문과 배송은 일대일 관계이다.
  - **카테고리(Category):** 상품과 다대다 관계를 맺는다. parent, child로 부모, 자식 카테고리를 연결한다.
  - **주소(Address):** 값 타입(임베디드 타입)이다. 회원과 배송에서 사용한다.
  
  
  > 참고: 회원이 주문을 하기 때문에 회원이 주문리스트를 가지는 것은 얼핏 보면 잘 설계한 것 같지만,
  > 객체 세상은 실제 세계와는 다르다.
  > 실무에서는 회원이 주문을 참조하지 않고 주문이 회원을 참조하는 것으로 충분하다.
  
## 테이블 분석
  ![테이브](https://user-images.githubusercontent.com/68942616/90248522-d0912580-de73-11ea-9a5b-3844bc730bc4.PNG)
  - **MEMBER**: 회원 엔티티의 Address 임베디드 타입 정보가 회원 테이블에 그대로 들어갔다. 이는 DELIVERY 테이블도 마찬가지다.
  - **ITEM**: 앨범, 도서, 영화 타입을 통합해서 하나의 테이블로 만들었다. DTYPE 컬럼으로 타입을 구분한다.
  
  
  > 참고: 테이블명이 ORDER가 아니라 ORDERS인 것은 데이터베이스가 order by 때문에 예약어로 잡고 있는 경우가 많기 때문에
  관례상 ORDERS를 많이 사용한다.
